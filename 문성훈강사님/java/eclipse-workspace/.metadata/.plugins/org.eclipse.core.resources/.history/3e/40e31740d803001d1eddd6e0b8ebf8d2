package lecture0715;

class ThreadExam08_1 extends Thread {
	final static int MAX_MEMORY = 1000;
	int usedMemory = 0;
	
	@Override
	public void run() {
		while(true) {
			try {
				Thread.sleep(10000);
			} catch (Exception e) {
				System.out.println("interrupt()에 의해 깨어났어요.");
			}
			gc();
			System.out.println("메모리 청소 완료!\n 현재 사용 가능한 메모리는 : " + freeMemory());
		}
	}
	
	public void gc() {
		// 현재 사용되고 있는 memory 양을 줄여줌
		usedMemory -= 300;
		if (usedMemory < 0) {
			usedMemory = 0;
		}
	}
	
	public int totalMemory() { return MAX_MEMORY; }
	
	public int freeMemory() { return MAX_MEMORY - usedMemory; }
	// 사용가능한 memory 양
}

public class ThreadExam08 {
	public static void main(String[] args) {
		Thread t = new ThreadExam08_1();
		t.setDaemon(true);
		t.start();
		
		while(true) {
			
		}
	}
}
