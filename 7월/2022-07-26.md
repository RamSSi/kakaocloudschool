# -복습-

- Internet 상에서 HTTP를 사용하는 WWW(World Wide Web) Service

<br>

### C/S 구조
- 상대적으로 다수의 Client가 소수의 Server에 접속해서 Service를 제공받는 형태

<br>

### HTTP Request
- request method : GET, POST, PUT, DELETE
<ol>	
  <li>GET 방식</li>
  <ul>
    <li>browser 주소창에 직접 url을 입력한 후, request 전달</li>
    <li>&lt;a href="~"&gt;를 click해서 request 전달</li>
    <li>&lt;form&gt;의 method 속성을 'GET'으로 지정하여 request 전달</li>
  </ul> 
  <li>POST 방식</li>
	<ul>
    <li>&lt;form&gt;의 method 속성을 'POST'로 지정하여 request 전달</li>
  </ul>
</ol>


▶ GET : Client의 추가적인 data를 'Query String'이라는 형식으로 server에 전달하는데 String 길이의 제한으로 인해 정상적인 전달이 되지 않을 수 있음
▶ POST : Client의 추가적인 data를 request 안에 포함시켜 server에 전달하기 때문에 길이 제한이 없고, url에 직접적으로 노출되지 않음

<br>

### 정적 Web(Static Web)
- HTTP Request Message : Web Server가 가지고 있는 Static Resource(html, css, js, image...)를 요청
    1) request line
    2) request header
    3) request body
    <br>
- HTTP Response Message
    1) status line
    2) response header
    3) response body

<br>

### 동적 Web(Dynamic Web)
- web server 측에서 web client가 요청한 program을 실행한 후 그 결과를 HTTP Response로 돌려준다.
- CGI(Common Gateway Interface ▶ Process 단위 
  - Client가 request할 때마다 process가 생성되어 요청에 대한 데이터 처리를 수행하기 때문에 자원의 고갈이 빨라짐 -> Thread 단위로 처리)

#### 구조
![](https://velog.velcdn.com/images/ramu/post/b5cbccbf-5117-4776-8663-482f47cf3753/image.png)


<br>

# Apache Tomcat 
## (HTTP Server +  Servlet Container)
> Web 상에서 동작하는 java program을 만들기 위한 규칙

- Servlet : **HTTPServlet** 을 상속해서 구현 -> eclipse의 도움을 받아 Servlet 생성

## Servlet 실행 순서
![](https://velog.velcdn.com/images/ramu/post/d6d28a14-4960-43e2-9157-ada3f267ddc7/image.png)



## Servlet 단점
- response에 포함될 결과 HTML을 Java program 내에서 기술 => 노동 집약적
### ▶ JSP
![](https://velog.velcdn.com/images/ramu/post/5610746e-2309-468a-b3dc-5ff80427b6c8/image.png)

<br>
---

# JSP

## JSP 동작
![](https://velog.velcdn.com/images/ramu/post/bf25f0f5-fcfb-4a11-9e99-d62aae03f295/image.png)

1) Client가 request(.jsp 호출)
2) web server가 request를 servlet container에 전달(forwarding)
3) jsp 파일을 servlet(java)으로 translation
4) servlet 파일을 class로 compile (servlet 객체를 만들기 위한 class)
5) Thread가 이 class로 servlet instance를 만들어 servlet method인 service()를 호출

- JSP의 성능이 훨씬 좋고, 구현이 더욱 간편하기 때문에 Servlet을 사용하지 않게 됨

<br>

## JSP 구조
- HTML + JSP Element(JSP 요소)
- JSP Element : 특정한 표기법으로 HTML 안에 삽입
  - 주석 &lt;%-- 주석 --%&gt; : 주석
  - Directive &lt;**%@** 지시어 %&gt;
    - &lt;%@ page ~ %&gt; : setContentType
  - Declaration &lt;%! 변수, method %&gt; : 변수, 메소드의 선언, 정의
    - servlet class의 field와 method
  - Scriptlet &lt;% 코드 %&gt; : 일반적인 자바 Logic code
    - _jspService()로 들어감
  - Expression &lt;%= 식 %&gt;
    - out.println()에 들어감
- JSP Element로 구성된 HTML 파일이 한 번에 ```out.println()```으로 전달됨

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	이름을 입력하세요. <br />
	<form action="http://localhost:8080/html/hello.jsp" method="post">
		이름 : <input type="text" name="userName" /><br />
		<input type="submit" value="서버로 전송" />
	</form>
</body>
</html>
```

```
<%@ page language="java" 
	contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"
    import="java.util.ArrayList"%>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	
<%	request.setCharacterEncoding("UTF-8");
	String name = request.getParameter("userName"); // 내장 객체가 존재하기 때문에 request 사용 가능 %>
	받은 데이터는 : <%= name %>
	
</body>
</html>
```
![](https://velog.velcdn.com/images/ramu/post/22eed83e-6d56-4a9a-a9d4-dcdbdb8ded79/image.png)![](https://velog.velcdn.com/images/ramu/post/a3f7526a-b68b-449c-b22c-0bdbe3496a6f/image.png)

## JSP의 내장객체 
> ### JSP 코드 내에서 사용할 수 있는 객체
- request : HttpServletPequest class type의 객체
- response : HttpServletResponse class type의 객체
- out : PrintWriter 객체
- session : HttpSession class 객체 - web client당 1개씩 할당됨
  - client의 작업을 지속적으로 tracking (Servlet에서는 직접 코드로 할당해야 했음)
- application : ServletContext 객체 - 모든 servlet에 의해 공유되는 객체
- page : this


### Layered Architecture
> 프로그램을 역할별로 나누어 만들자!

||
|:--:|
|Presentaion Layer|
|Business Logic Layer|
|Persistence Layer|
|Database Layer|

### ▶ MVC Pattern 
software system 3가지 type의 component로 분할하는 소프트웨어 패턴

![](https://velog.velcdn.com/images/ramu/post/0a80a9ff-0faf-44c0-abda-7e1c46d6047c/image.png)

>#### Model
- Domain Model : 데이터(IO, DO, DTO, Entity)
- Business Model : 조직(Service)

>#### View
 사용자 interface 담당
- JSP, HTML


>#### Controller
> 시스템의 흐름 제어


#
- Login
- 도서 검색
