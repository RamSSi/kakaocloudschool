# JDBC (Java Database Connectivity)

### : Java Classì™€ interfaceì˜ ì§‘í•©

- DBMS(MySQL, Oracle, DB2 ... )ê°€ ê°ê° ë‹¤ë¥´ê²Œ êµ¬í˜„ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— DBë§ˆë‹¤ ì‚¬ìš© ë°©ë²•ì´ ë‹¤ë¦„
- í”„ë¡œê·¸ë¨ ì½”ë“œì˜ ìœ ì§€ ë³´ìˆ˜, ì¬í™œìš©ì„± ë¬¸ì œ ë°œìƒ â–¶ ê³µí†µì˜ interface í•„ìš”

<br>

## Java Program - DBMS
- JDBC interface : Java Programê³¼ DBMSê°€ ì§ì ‘ ì—°ê²°ë˜ì§€ ì•Šê³  interfaceë¥¼ í†µí•´ ì ‘ê·¼ â–¶ ì‚¬ìš©í•˜ëŠ” DBMSì— ë”°ë¼ JDBC driverì™€ ì—°ê²°í•´ì¤Œ
- ### JDBC driver : DBMSë¥¼ Java Programìœ¼ë¡œ ì¡°ì‘í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” Java Class
    - Database Vendorê°€ ì‘ì„±í•´ì„œ ë°°í¬
- Java programì˜ build pathì— ì¶”ê°€í•˜ì—¬ Package ì‚¬ìš©
![](https://velog.velcdn.com/images/ramu/post/e0df5097-6b2b-44a2-b8dc-6326ce9cad85/image.png)

![](https://velog.velcdn.com/images/ramu/post/69adcbac-5ea1-45b5-883d-b6504ac41166/image.png)

<br><br>

# JDBC ì—°ê²°
## 1) JDBC driver loading ì‘ì—… : ì‚¬ìš©í•˜ë ¤ëŠ” Databaseì— ë§ëŠ” driver classë¥¼ ë“±ë¡
- ğŸŒŸ'Class'ë¼ëŠ” class ì‚¬ìš©
- DriverManager classì˜ register method ì‚¬ìš©

<br>

## 2) DBMSì™€ ì—°ê²° (ì‹¤ì œë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°)
- ì—°ê²° ì„±ê³µ â–¶ Connection ê°ì²´ ë°˜í™˜ (DBì— ì ‘ì† ê°€ëŠ¥)
- ë°ì´í„°ë² ì´ìŠ¤ì—ì„œëŠ” Sessionì´ ë§Œë“¤ì–´ì§
- ì—°ê²° í†µë¡œë¥¼ ë§Œë“¤ì–´ ìë°” í”„ë¡œê·¸ë¨ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ
- Load(ë¶€í•˜)ê°€ í° ì‘ì—…
- ë‹¤ ì‚¬ìš©í•œ í›„ ë°˜ë“œì‹œ ìì›ì„ í•´ì œ (Close)
    - ì—°ê²°í•  ìˆ˜ ìˆëŠ” ì„¸ì…˜ì˜ ìˆ˜ê°€ ì •í•´ì ¸ ìˆìŒ
    - Databaseì˜ sessionì´ ì¢…ë£Œë  ìˆ˜ ìˆë„ë¡ ì²˜ë¦¬

#### Jdbc URL : ë¬¸ìì—´ ê°ì²´, ì–´ë–¤ Database sessionê³¼ ì—°ê²°í•  ê²ƒì¸ì§€ì— ëŒ€í•œ ëª¨ë“  ì •ë³´ê°€ ë‹´ê²¨ìˆìŒ
- JDBC URL, ID, pwë¥¼ ì´ìš©í•˜ì—¬ connectionì„ ìƒì„±

<br>

## 3) Stataementë¥¼ ìƒì„±
- ì¼ë°˜ statement
- preparedStatement : ì¼ë°˜ statement ê°œëŸ‰í˜•

-> SQL êµ¬ë¬¸ ì‹¤í–‰
- callableStatement : SQLì˜ stored procedure í˜¸ì¶œ ê°€ëŠ¥

<br>

## 4) Query ì‹¤í–‰
statementë¥¼ ì´ìš©í•´ SQL Queryë¥¼ DBMSì— ì „ë‹¬í•˜ì—¬ ì‹¤í–‰
- execute() : ë™ì ìœ¼ë¡œ SQLì´ ë³€í•˜ëŠ” ê²½ìš° ì‚¬ìš©
- executeQuery() : SELECT
- executeUpdate() : INSERT, UPDATE, DELETE â–¶ INT ë°˜í™˜ (ì˜í–¥ì„ ë°›ì€ row(í–‰)ì˜ ìˆ˜)

#### ResultSet : ì¿¼ë¦¬ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°˜í™˜ë°›ëŠ” ê°ì²´

<br>

## 5) ê²°ê³¼ ì²˜ë¦¬ (ResultSet)
```
ResultSet rs = pstmt.executeQuery();
```
- rsì— ë“¤ì–´ì˜¤ëŠ” ê°’ : ê²°ê³¼ Recordì˜ ì§‘í•©
- ```rs.next()``` : ë‹¤ìŒ rowë¡œ ì´ë™í•˜ëŠ” ë©”ì„œë“œ 
    - return ê°’ : boolean (ë‹¤ìŒ í–‰ìœ¼ë¡œ ì´ë™ - True, ì´ë™í•  í–‰ ì—†ìŒ - False)
- ```rs.get<<Type>>("field name" ë˜ëŠ” field column index)``` : ì—¬ëŸ¬ê°€ì§€ typeì˜ Database recordì˜ dataë¥¼ ì›í•˜ëŠ” typeìœ¼ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ 
    - ex. ```rs.getString("name")```
    - ex. ```rs.getString(2)```
- ê¸°ë³¸ ResultSetì€ ì´ì „ í–‰ìœ¼ë¡œ ëŒì•„ê°ˆ ìˆ˜ ì—†ìŒ (ResultSetê³¼ DBê°€ ì—°ë™ë˜ì§€ ì•ŠìŒ)
    - Scrollable Cursor : ì›í•˜ëŠ” ìœ„ì¹˜ë¡œ ì´ë™í•  ìˆ˜ ìˆìŒ (DBì™€ ì™„ì „íˆ ì—°ê²°ì´ ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë¶€í•˜ê°€ í¼)

- ```rs.set<<Type>>(IN Parameterì˜ index, ëŒ€ì…í•  ê°’)```
    - ex. ```rs.setString(0, "KBS")```
    
<br><br><br>

# Connection Pool
### ë™ì‹œì— ë§ì€ ì‚¬ìš©ìì— ëŒ€í•´ Database ì²˜ë¦¬ë¥¼ ì œê³µí•˜ë ¤ë©´?
- í•˜ë‚˜ì˜ Database ì—°ê²° ê°ì²´ì¸ Connection ê³µìœ ??? ë¶ˆê°€ëŠ¥ (Transaction ë¬¸ì œ)
 #### Pooling ê¸°ë²• ì‚¬ìš©
 1) ì†ë„ í–¥ìƒ
 2) ìì›ì˜ íš¨ìœ¨ì„± í–¥ìƒ
 3) Connection ìˆ˜ ì œì–´ ê°€ëŠ¥ (ê°€ëŠ¥í•œ Connectionì˜ ìˆ˜ë¥¼ ì§€ì •í•˜ì—¬ ë‚˜ë¨¸ì§€ Connection ìš”êµ¬ëŠ” ëŒ€ê¸°)
 
 - Connection Poolì„ ë§Œë“œëŠ” ê²ƒì€ ë§¤ìš° ì–´ë ¤ì›€(ë³µì¡í•œ êµ¬ì¡°)
 - Library ì´ìš© 
    - ë¬´ë£Œ : Apache connection DBCP
	![](https://velog.velcdn.com/images/ramu/post/bc7e1261-189c-429a-a149-58b433e0dd40/image.png)

<br><br><br>
# Layered Architecture
- Presentation Layer : ì…ì¶œë ¥ê³¼ ê´€ë ¨ëœ ê³„ì¸µ <strong> > View</strong> ex. javafx
- Business Logic Layer : Logic ì²˜ë¦¬, ì—°ì‚° => ê²°ê³¼ë¥¼ Presentation Layerë¡œ ì „ë‹¬ <strong>> Service</strong>
- Persistence Layer : Business Layerì—ì„œ ìš”êµ¬í•˜ëŠ” DB ê´€ë ¨ Logicì— ëŒ€í•´ Databaseë¥¼ ì§ì ‘ ì²˜ë¦¬í•˜ëŠ” ê³„ì¸µ <strong>> DAO(Data Access Object</strong> 
- Database Layer : Databaseê°€ ì¡´ì¬í•˜ëŠ” ê³„ì¸µ <strong>> </strong>

#### ê°ê°ì˜ Layerì—ì„œ ë‚˜íƒ€ë‚˜ëŠ” ë³€í™”ê°€ ì¸ì ‘ Layerì— ì˜í–¥ì„ ë¯¸ì¹˜ë©´ ì•ˆë˜ê³ , ë–¨ì–´ì ¸ìˆëŠ” Layerì™€ ì•„ë¬´ëŸ° ê´€ë ¨ì´ ì—†ì–´ì•¼ í•œë‹¤.
#### => MVC : Layered Architectureë¥¼ ì˜ í‘œí˜„

DTO (Data Transfer Object) : ë°ì´í„°ì˜ ê·œê²©í™”
VO (Value Object), DO ( Domain Object), Entity, Been??